const l=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}};l();class h{constructor(e){this.position=e}update(e){}keyboard_event_down(e){}keyboard_event_up(e){}draw(e,t){}}var c="/Darkfire/assets/map.11d9b2ca.jpg";class f extends h{constructor(e,t="yellow",r=300){super(e),this.mapSize=1e3,this.origin={x:e.x,y:e.y},this.color=t,this.maxSpeed=r,this.speed={x:r,y:r},this.image=new Image,this.image.src=c,this.frames=0}update(e){this.frames++,this.frames>85&&(this.frames=0)}draw(e,t){let r=this.origin;t.translate(r.x,r.y),t.drawImage(this.image,38,29,1380,661,0,0,this.mapSize,this.mapSize)}keyboard_event_down(e){switch(e){case"ArrowRight":console.log("right"),this.speed.x=this.maxSpeed;break;case"ArrowLeft":console.log("left"),this.speed.x=-this.maxSpeed;break;case"ArrowUp":console.log("up");break;case"ArrowDown":console.log("down");break;default:console.log("not a valid key");break}}keyboard_event_up(e){switch(e){case"ArrowRight":this.speed.x=0;break;case"ArrowLeft":this.speed.x=0;break}}}var p="/Darkfire/assets/spriteStandRight.f1d72912.png";const y=1,n={right:{pressed:!1},letf:{pressed:!1}};class g extends h{constructor(e){super(e),this.position={x:30,y:700},this.velocity={x:0,y:0},this.heigth=200,this.width=80,this.canvasW=innerWidth,this.canvasH=innerHeight,this.image=new Image,this.image.src=p,this.frames=0}draw(e,t){t.drawImage(this.image,177*this.frames,0,177,400,this.position.x,this.position.y,this.width,this.heigth)}update(e){this.frames++,this.frames>28&&(this.frames=0),this.position.y+=this.velocity.y,this.position.x+=this.velocity.x,this.position.y+this.heigth+this.velocity.y<=1020?this.velocity.y+=y:this.velocity.y=0,n.right.pressed&&this.position.x?this.velocity.x=5:n.letf.pressed&&this.position.x?this.velocity.x=-5:this.velocity.x=0}keyboard_event_down(e){switch(e){case"ArrowRight":console.log("right"),n.right.pressed=!0;break;case"ArrowLeft":console.log("left"),n.letf.pressed=!0;break;case"ArrowUp":console.log("up"),this.velocity.y-=20;break;case"ArrowDown":console.log("down");break;default:console.log("not a valid key");break}}keyboard_event_up(e){switch(e){case"ArrowRight":n.right.pressed=!1;break;case"ArrowLeft":n.letf.pressed=!1;break}}}class m extends h{draw(e,t){const r=(1/e).toFixed(2);t.font="50px Arial",t.fillStyle="white",t.fillText(`FPS: ${r}`,this.position.x,this.position.y)}}var w="/Darkfire/assets/fire.6f1645f4.png";class u extends h{constructor(e){super(e),this.position={x:300,y:600},this.height=380,this.width=500,this.images=new Image,this.images.src=w,this.frames=0}update(e){this.frames++,this.frames>2&&(this.frames=0)}draw(e,t){t.drawImage(this.images,1*this.frames,-35,44,98,this.position.x,this.position.y,this.width,this.height)}}window.onload=()=>{const a=document.getElementById("canvas"),e=a.getContext("2d");let t=[new f({x:10,y:10}),new m({x:5,y:50}),new g({x:30,y:0}),new u({x:30,y:10})],r=0;const s=i=>{let o=(i-r)/1e3;r=i,t.forEach(d=>{d.update(o)}),e.clearRect(0,0,a.width,a.height),t.forEach(d=>{e.save(),d.draw(o,e),e.restore()}),window.requestAnimationFrame(s)};window.requestAnimationFrame(s),document.body.addEventListener("keydown",i=>{t.forEach(o=>{o.keyboard_event_down&&o.keyboard_event_down(i.key)})}),document.body.addEventListener("keyup",i=>{t.forEach(o=>{o.keyboard_event_up&&o.keyboard_event_up(i.key)})})};
